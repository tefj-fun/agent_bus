apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "agent-bus.fullname" . }}-config
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "agent-bus.labels" . | nindent 4 }}
data:
  ENVIRONMENT: {{ .Values.config.environment | quote }}
  DEBUG: {{ .Values.config.debug | quote }}
  LLM_MODE: {{ .Values.config.llm.mode | quote }}
  LLM_PROVIDER: {{ .Values.config.llm.provider | quote }}
  REDIS_HOST: {{ include "agent-bus.redis.host" . | quote }}
  REDIS_PORT: {{ .Values.redis.external.enabled | ternary (.Values.redis.external.port | toString) "6379" | quote }}
  POSTGRES_HOST: {{ include "agent-bus.postgresql.host" . | quote }}
  POSTGRES_PORT: {{ .Values.postgresql.external.enabled | ternary (.Values.postgresql.external.port | toString) "5432" | quote }}
  POSTGRES_DB: {{ .Values.postgresql.auth.database | quote }}
  POSTGRES_USER: {{ .Values.postgresql.auth.username | quote }}
  PYTHONUNBUFFERED: {{ .Values.config.pythonUnbuffered | quote }}
  PYTHONDONTWRITEBYTECODE: {{ .Values.config.pythonDontWriteBytecode | quote }}
